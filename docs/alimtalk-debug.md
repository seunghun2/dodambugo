# 알림톡 발송 오류 디버깅

## 현재 상태 (2026-01-21)

### 오류 내용
- **에러 코드**: 1057
- **메시지**: "템플릿 내용과 변수가 일치하지 않습니다. 카카오서버로 전달하지 못했습니다."

### 발송된 데이터 분석
```json
"variables": {
  "장례식장": "서울성모병원장례식장 특2호실",
  "발인일시": "2026-01-23 09:30",
  "부고번호": "1578",
  "#{장례식장}": "",    // ← 이상하게 빈값으로 중복 추가됨
  "#{발인일시}": "",
  "#{부고번호}": ""
}
```

### 의심 사항
1. SOLAPI 내부에서 `#{}` 형태 변수를 자동 파싱하면서 빈값 추가?
2. 템플릿의 버튼 URL과 변수명 불일치 가능성
3. 템플릿이 승인되었지만 변수 설정이 잘못됨

### 확인 필요 사항
- [ ] SOLAPI 템플릿 버튼 URL에서 사용된 변수명 확인
- [ ] 템플릿 내용의 변수명과 코드에서 보내는 변수명 일치 확인
- [ ] SOLAPI 고객센터 문의 고려

### 템플릿 정보
- **Template ID**: KA01TP260118135823678PREE2wpc4c2
- **Channel ID**: KA01PF260116055354175OcsXglgUTBt
- **발신번호**: 01048375076

### 템플릿 내용
```
상주님, 요청하신 부고장이 생성 완료되었습니다.

- 장례식장: #{장례식장}
- 발인일시: #{발인일시}

아래 버튼을 눌러 부고장을 확인하고 지인분들께 안내해 주세요.
```

### 버튼
- 버튼명: "부고장 확인하기"
- 버튼 URL: 확인 필요 (#{부고번호} 사용 여부)

---

## TODO
1. SOLAPI 콘솔에서 템플릿 버튼 URL 확인
2. 변수명 정확히 맞추기
3. 테스트 발송 후 확인
